<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8"><title>Daily Task</title><link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="card">
        <h2 id="timer">টাস্ক শুরু করুন</h2>
        <button id="ad-btn" onclick="startTask()">বিজ্ঞাপন দেখুন (৫ ৳)</button>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="app.js"></script>
    <script>
        function startTask() {
            db.ref('users/' + auth.currentUser.uid).once('value', s => {
                let user = s.val();
                if(!user.package || user.package === "None") return alert("আগে প্যাকেজ কিনুন!");
                if(user.tasksDone >= user.dailyLimit) return alert("আজকের লিমিট শেষ!");

                window.open("https://www.effectivegatecpm.com/gq9vqi27?key=25db0688adaf0322fd73b296bfd41f87", "_blank");

                let sec = 15; [cite: 2026-01-14]
                document.getElementById('ad-btn').disabled = true;
                let t = setInterval(() => {
                    document.getElementById('timer').innerText = sec + " সেকেন্ড বাকি...";
                    if(sec-- <= 0) {
                        clearInterval(t);
                        db.ref('users/' + auth.currentUser.uid).update({ 
                            balance: (user.balance || 0) + 5, tasksDone: (user.tasksDone || 0) + 1 
                        });
                        alert("৫ টাকা যোগ হয়েছে!"); location.reload();
                    }
                }, 1000);
            });
        }
    </script>
</body>
</html>
